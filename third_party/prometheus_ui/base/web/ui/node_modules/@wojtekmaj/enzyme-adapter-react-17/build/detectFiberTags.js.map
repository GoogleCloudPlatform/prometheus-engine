{"version":3,"file":"detectFiberTags.js","names":["getFiber","element","container","global","document","createElement","inst","Tester","React","Component","ReactDOM","render","_reactInternals","child","getLazyFiber","LazyComponent","SuspenseWrapper","Suspense","fallback","module","exports","detectFiberTags","Fn","Cls","Ctx","createContext","FwdRef","forwardRef","props","ref","lazy","fakeDynamicImport","HostRoot","tag","ClassComponent","Fragment","FunctionalComponent","MemoSFC","memo","MemoClass","HostPortal","createPortal","HostComponent","HostText","Mode","StrictMode","ContextConsumer","Consumer","ContextProvider","Provider","value","ForwardRef","Profiler","id","onRender","Lazy","OffscreenComponent"],"sources":["../src/detectFiberTags.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from '@wojtekmaj/enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternals.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(React.Suspense, { fallback: false }, React.createElement(Tester));\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternals.child;\n}\n\nmodule.exports = function detectFiberTags() {\n  function Fn() {\n    return null;\n  }\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = React.createContext();\n  // React will warn if we don't have both arguments.\n  // eslint-disable-next-line no-unused-vars\n  let FwdRef = React.forwardRef((props, ref) => null);\n  let LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: getFiber(React.createElement(React.memo(Fn))).tag,\n    MemoClass: getFiber(React.createElement(React.memo(Cls))).tag,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: getFiber(React.createElement(React.StrictMode)).tag,\n    ContextConsumer: getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag,\n    ContextProvider: getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag,\n    ForwardRef: getFiber(React.createElement(FwdRef)).tag,\n    Profiler: getFiber(\n      React.createElement(React.Profiler, {\n        id: 'mock',\n        onRender() {},\n      }),\n    ).tag,\n    Suspense: getFiber(React.createElement(React.Suspense, { fallback: false })).tag,\n    Lazy: getLazyFiber(LazyComponent).tag,\n    OffscreenComponent: getLazyFiber('div').return.return.tag, // Go two levels above to find the root\n  };\n};\n"],"mappings":";;;AAAA;AACA;AACA;AAAoE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpE,SAASA,QAAQ,CAACC,OAAO,EAAE;EACzB,IAAMC,SAAS,GAAGC,MAAM,CAACC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACtD,IAAIC,IAAI,GAAG,IAAI;EAAC,IACVC,MAAM;IAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA,OACV,kBAAS;QACPD,IAAI,GAAG,IAAI;QACX,OAAOL,OAAO;MAChB;IAAC;IAAA;EAAA,EAJkBO,iBAAK,CAACC,SAAS;EAMpCC,oBAAQ,CAACC,MAAM,eAACH,iBAAK,CAACH,aAAa,CAACE,MAAM,CAAC,EAAEL,SAAS,CAAC;EACvD,OAAOI,IAAI,CAACM,eAAe,CAACC,KAAK;AACnC;AAEA,SAASC,YAAY,CAACC,aAAa,EAAE;EACnC,IAAMb,SAAS,GAAGC,MAAM,CAACC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACtD,IAAIC,IAAI,GAAG,IAAI;EAAC,IAEVC,MAAM;IAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA,OACV,kBAAS;QACPD,IAAI,GAAG,IAAI;QACX,oBAAOE,iBAAK,CAACH,aAAa,CAACU,aAAa,CAAC;MAC3C;IAAC;IAAA;EAAA,EAJkBP,iBAAK,CAACC,SAAS;EAAA,IAO9BO,eAAe;IAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA,OACnB,kBAAS;QACP,oBAAOR,iBAAK,CAACH,aAAa,CAACG,iBAAK,CAACS,QAAQ,EAAE;UAAEC,QAAQ,EAAE;QAAM,CAAC,eAAEV,iBAAK,CAACH,aAAa,CAACE,MAAM,CAAC,CAAC;MAC9F;IAAC;IAAA;EAAA,EAH2BC,iBAAK,CAACC,SAAS;EAK7CC,oBAAQ,CAACC,MAAM,eAACH,iBAAK,CAACH,aAAa,CAACW,eAAe,CAAC,EAAEd,SAAS,CAAC;EAChE,OAAOI,IAAI,CAACM,eAAe,CAACC,KAAK;AACnC;AAEAM,MAAM,CAACC,OAAO,GAAG,SAASC,eAAe,GAAG;EAC1C,SAASC,EAAE,GAAG;IACZ,OAAO,IAAI;EACb;EAAC,IACKC,GAAG;IAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA,OACP,kBAAS;QACP,OAAO,IAAI;MACb;IAAC;IAAA;EAAA,EAHef,iBAAK,CAACC,SAAS;EAKjC,IAAIe,GAAG,gBAAGhB,iBAAK,CAACiB,aAAa,EAAE;EAC/B;EACA;EACA,IAAIC,MAAM,gBAAGlB,iBAAK,CAACmB,UAAU,CAAC,UAACC,KAAK,EAAEC,GAAG;IAAA,OAAK,IAAI;EAAA,EAAC;EACnD,IAAId,aAAa,gBAAGP,iBAAK,CAACsB,IAAI,CAAC;IAAA,OAAM,IAAAC,qCAAiB,EAAC;MAAA,OAAM,IAAI;IAAA,EAAC;EAAA,EAAC;EAEnE,OAAO;IACLC,QAAQ,EAAEhC,QAAQ,CAAC,MAAM,CAAC,UAAO,UAAO,CAACiC,GAAG;IAAE;IAC9CC,cAAc,EAAElC,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACkB,GAAG,CAAC,CAAC,CAACU,GAAG;IACtDE,QAAQ,EAAEnC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAACiC,GAAG;IACpCG,mBAAmB,EAAEpC,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACiB,EAAE,CAAC,CAAC,CAACW,GAAG;IAC1DI,OAAO,EAAErC,QAAQ,eAACQ,iBAAK,CAACH,aAAa,eAACG,iBAAK,CAAC8B,IAAI,CAAChB,EAAE,CAAC,CAAC,CAAC,CAACW,GAAG;IAC1DM,SAAS,EAAEvC,QAAQ,eAACQ,iBAAK,CAACH,aAAa,eAACG,iBAAK,CAAC8B,IAAI,CAACf,GAAG,CAAC,CAAC,CAAC,CAACU,GAAG;IAC7DO,UAAU,EAAExC,QAAQ,eAACU,oBAAQ,CAAC+B,YAAY,CAAC,IAAI,EAAEtC,MAAM,CAACC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC4B,GAAG;IAC3FS,aAAa,EAAE1C,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC4B,GAAG;IACxDU,QAAQ,EAAE3C,QAAQ,CAAC,MAAM,CAAC,CAACiC,GAAG;IAC9BW,IAAI,EAAE5C,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACG,iBAAK,CAACqC,UAAU,CAAC,CAAC,CAACZ,GAAG;IACzDa,eAAe,EAAE9C,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACmB,GAAG,CAACuB,QAAQ,EAAE,IAAI,EAAE;MAAA,OAAM,IAAI;IAAA,EAAC,CAAC,CAACd,GAAG;IAClFe,eAAe,EAAEhD,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACmB,GAAG,CAACyB,QAAQ,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EAAE,IAAI,CAAC,CAAC,CAACjB,GAAG;IACvFkB,UAAU,EAAEnD,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACqB,MAAM,CAAC,CAAC,CAACO,GAAG;IACrDmB,QAAQ,EAAEpD,QAAQ,eAChBQ,iBAAK,CAACH,aAAa,CAACG,iBAAK,CAAC4C,QAAQ,EAAE;MAClCC,EAAE,EAAE,MAAM;MACVC,QAAQ,sBAAG,CAAC;IACd,CAAC,CAAC,CACH,CAACrB,GAAG;IACLhB,QAAQ,EAAEjB,QAAQ,eAACQ,iBAAK,CAACH,aAAa,CAACG,iBAAK,CAACS,QAAQ,EAAE;MAAEC,QAAQ,EAAE;IAAM,CAAC,CAAC,CAAC,CAACe,GAAG;IAChFsB,IAAI,EAAEzC,YAAY,CAACC,aAAa,CAAC,CAACkB,GAAG;IACrCuB,kBAAkB,EAAE1C,YAAY,CAAC,KAAK,CAAC,UAAO,UAAO,CAACmB,GAAG,CAAE;EAC7D,CAAC;AACH,CAAC"}