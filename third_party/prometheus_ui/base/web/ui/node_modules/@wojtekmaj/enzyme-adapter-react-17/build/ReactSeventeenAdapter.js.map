{"version":3,"sources":["../src/ReactSeventeenAdapter.js"],"names":["FiberTags","nodeAndSiblingsArray","nodeWithSibling","array","node","push","sibling","flatten","arr","result","stack","i","length","n","pop","el","Array","isArray","nodeTypeFromType","type","Portal","isMemo","Memo","isLazy","Lazy","unmemoType","checkIsSuspenseAndCloneElement","suspenseFallback","children","props","fallback","replaceLazyWithFallback","FakeSuspenseWrapper","React","createElement","elementToTree","containerInfo","nodeType","key","ref","instance","rendered","toTree","vnode","tag","HostRoot","childrenToTree","child","HostPortal","stateNode","memoizedProps","ClassComponent","FunctionalComponent","MemoClass","elementType","MemoSFC","renderedNodes","map","HostComponent","HostText","Fragment","Mode","ContextProvider","ContextConsumer","Profiler","ForwardRef","pendingProps","Suspense","OffscreenComponent","Error","nodeToHostNode","_node","mapper","item","ReactDOM","findDOMNode","eventOptions","animation","pointerEvents","auxClick","getEmptyStateValue","EmptyState","Component","testRenderer","ShallowRenderer","render","_instance","state","wrapAct","fn","returnVal","TestUtils","act","getProviderDefaultValue","Provider","_context","_defaultValue","_currentValue","makeFakeElement","$$typeof","Element","isStateful","prototype","isReactComponent","__reactAutoBindPairs","ReactSeventeenAdapter","lifecycles","options","enableComponentDidUpdateOnSetState","legacyContextMode","componentDidUpdate","onSetState","getDerivedStateFromProps","hasShouldComponentUpdateBug","getSnapshotBeforeUpdate","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","getDerivedStateFromError","TypeError","attachTo","hydrateIn","wrappingComponentProps","domNode","global","document","adapter","context","callback","wrapperProps","refProp","ReactWrapperComponent","wrappedEl","hydrate","setChildProps","unmount","unmountComponentAtNode","getNode","isCustomComponent","_reactInternals","simulateError","nodeHierarchy","rootNode","error","isErrorBoundary","elInstance","componentDidCatch","find","catchingInstance","catchingType","displayNameOfNode","simulateEvent","event","mock","mappedEvent","eventFn","Simulate","batchedUpdates","getWrappingComponentRenderer","inst","getMountWrapperInstance","wrapInvoke","renderer","isDOM","cachedNode","lastComponent","wrappedComponent","sentinel","wrapPureComponent","compare","shouldComponentUpdate","nextProps","isPureReactComponent","memoized","prevProps","wrappedComponentFn","shouldUpdate","args","defaultProps","Object","assign","displayName","wrapFunctionalComponent","renderElement","elConfig","rest","renderedEl","typeIsExisted","clonedEl","elementIsChanged","unmaskedContext","providerValues","Map","set","value","MockProvider","getProviderFromConsumer","has","get","MockConsumer","contextTypes","InnerComp","isComponentStateful","originalMethod","_updateClassComponent","clonedProps","apply","restore","emptyStateValue","defineProperty","configurable","enumerable","writable","output","getRenderOutput","concat","handler","checkPropTypes","typeSpecs","values","location","hierarchy","childContextTypes","ContextWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","matchingType","supportsArray","nodes","ConcurrentMode","NaN","StrictMode","$$typeofType","nodeName","name","object","fragment","fakeElement","isValidElement","Consumer","RootFinder","module","exports"],"mappings":"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","sourcesContent":["/* eslint-disable no-use-before-define */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactDOMServer from 'react-dom/server';\nimport ShallowRenderer from 'react-test-renderer/shallow';\nimport TestUtils from 'react-dom/test-utils';\nimport checkPropTypes from 'prop-types/checkPropTypes';\nimport has from 'has';\nimport {\n  ConcurrentMode,\n  ContextConsumer,\n  ContextProvider,\n  Element,\n  ForwardRef,\n  Fragment,\n  isContextConsumer,\n  isContextProvider,\n  isElement,\n  isForwardRef,\n  isPortal,\n  isSuspense,\n  isValidElementType,\n  Lazy,\n  Memo,\n  Portal,\n  Profiler,\n  StrictMode,\n  Suspense,\n} from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport { typeOfNode } from 'enzyme/build/Utils';\nimport shallowEqual from 'enzyme-shallow-equal';\nimport {\n  displayNameOfNode,\n  elementToTree as utilElementToTree,\n  nodeTypeFromType as utilNodeTypeFromType,\n  mapNativeEventNames,\n  propFromEvent,\n  assertDomAvailable,\n  withSetStateAllowed,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  simulateError,\n  wrap,\n  getMaskedContext,\n  getComponentStack,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n  compareNodeTypeOf,\n  spyMethod,\n} from '@wojtekmaj/enzyme-adapter-utils';\nimport findCurrentFiberUsingSlowPath from './findCurrentFiberUsingSlowPath';\nimport detectFiberTags from './detectFiberTags';\n\n// Lazily populated if DOM is available.\nlet FiberTags = null;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  const array = [];\n  let node = nodeWithSibling;\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n  return array;\n}\n\nfunction flatten(arr) {\n  const result = [];\n  const stack = [{ i: 0, array: arr }];\n  while (stack.length) {\n    const n = stack.pop();\n    while (n.i < n.array.length) {\n      const el = n.array[n.i];\n      n.i += 1;\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({ i: 0, array: el });\n        break;\n      }\n      result.push(el);\n    }\n  }\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === Portal) {\n    return 'portal';\n  }\n\n  return utilNodeTypeFromType(type);\n}\n\nfunction isMemo(type) {\n  return compareNodeTypeOf(type, Memo);\n}\n\nfunction isLazy(type) {\n  return compareNodeTypeOf(type, Lazy);\n}\n\nfunction unmemoType(type) {\n  return isMemo(type) ? type.type : type;\n}\n\nfunction checkIsSuspenseAndCloneElement(el, { suspenseFallback }) {\n  if (!isSuspense(el)) {\n    return el;\n  }\n\n  let { children } = el.props;\n\n  if (suspenseFallback) {\n    const { fallback } = el.props;\n    children = replaceLazyWithFallback(children, fallback);\n  }\n\n  const FakeSuspenseWrapper = (props) => React.createElement(\n    el.type,\n    { ...el.props, ...props },\n    children,\n  );\n  return React.createElement(FakeSuspenseWrapper, null, children);\n}\n\nfunction elementToTree(el) {\n  if (!isPortal(el)) {\n    return utilElementToTree(el, elementToTree);\n  }\n\n  const { children, containerInfo } = el;\n  const props = { children, containerInfo };\n\n  return {\n    nodeType: 'portal',\n    type: Portal,\n    props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children),\n  };\n}\n\nfunction toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  }\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n  const node = findCurrentFiberUsingSlowPath(vnode);\n  switch (node.tag) {\n    case FiberTags.HostRoot:\n      return childrenToTree(node.child);\n    case FiberTags.HostPortal: {\n      const {\n        stateNode: { containerInfo },\n        memoizedProps: children,\n      } = node;\n      const props = { containerInfo, children };\n      return {\n        nodeType: 'portal',\n        type: Portal,\n        props,\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.FunctionalComponent:\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.MemoClass:\n      return {\n        nodeType: 'class',\n        type: node.elementType.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child.child),\n      };\n    case FiberTags.MemoSFC: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'function',\n        type: node.elementType,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostComponent: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'host',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostText:\n      return node.memoizedProps;\n    case FiberTags.Fragment:\n    case FiberTags.Mode:\n    case FiberTags.ContextProvider:\n    case FiberTags.ContextConsumer:\n      return childrenToTree(node.child);\n    case FiberTags.Profiler:\n    case FiberTags.ForwardRef: {\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.pendingProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Suspense: {\n      return {\n        nodeType: 'function',\n        type: Suspense,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Lazy:\n      return childrenToTree(node.child);\n    case FiberTags.OffscreenComponent:\n      return toTree(node.child);\n    default:\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n  const children = nodeAndSiblingsArray(node);\n  if (children.length === 0) {\n    return null;\n  }\n  if (children.length === 1) {\n    return toTree(children[0]);\n  }\n  return flatten(children.map(toTree));\n}\n\nfunction nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  let node = _node;\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  }\n  // if the SFC returned null effectively, there is no host node.\n  if (!node) {\n    return null;\n  }\n\n  const mapper = (item) => {\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\n    return null;\n  };\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n  return mapper(node);\n}\n\nfunction replaceLazyWithFallback(node, fallback) {\n  if (!node) {\n    return null;\n  }\n  if (Array.isArray(node)) {\n    return node.map((el) => replaceLazyWithFallback(el, fallback));\n  }\n  if (isLazy(node.type)) {\n    return fallback;\n  }\n  return {\n    ...node,\n    props: {\n      ...node.props,\n      children: replaceLazyWithFallback(node.props.children, fallback),\n    },\n  };\n}\n\nconst eventOptions = {\n  animation: true,\n  pointerEvents: true,\n  auxClick: true,\n};\n\nfunction getEmptyStateValue() {\n  // this handles a bug in React 16.0 - 16.2\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\n  // also see https://github.com/facebook/react/pull/11965\n\n  class EmptyState extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  const testRenderer = new ShallowRenderer();\n  testRenderer.render(React.createElement(EmptyState));\n  return testRenderer._instance.state;\n}\n\nfunction wrapAct(fn) {\n  let returnVal;\n  TestUtils.act(() => { returnVal = fn(); });\n  return returnVal;\n}\n\nfunction getProviderDefaultValue(Provider) {\n  // React stores references to the Provider's defaultValue differently across versions.\n  if ('_defaultValue' in Provider._context) {\n    return Provider._context._defaultValue;\n  }\n  if ('_currentValue' in Provider._context) {\n    return Provider._context._currentValue;\n  }\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\n}\n\nfunction makeFakeElement(type) {\n  return { $$typeof: Element, type };\n}\n\nfunction isStateful(Component) {\n  return Component.prototype && (\n    Component.prototype.isReactComponent\n    || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\n  );\n}\n\nclass ReactSeventeenAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      enableComponentDidUpdateOnSetState: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          onSetState: true,\n        },\n        getDerivedStateFromProps: {\n          hasShouldComponentUpdateBug: false,\n        },\n        getSnapshotBeforeUpdate: true,\n        setState: {\n          skipsComponentDidUpdateOnNullish: true,\n        },\n        getChildContext: {\n          calledByRenderer: false,\n        },\n        getDerivedStateFromError: true,\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\n    }\n    if (FiberTags === null) {\n      // Requires DOM.\n      FiberTags = detectFiberTags();\n    }\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        return wrapAct(() => {\n          if (instance === null) {\n            const { type, props, ref } = el;\n            const wrapperProps = {\n              Component: type,\n              props,\n              wrappingComponentProps,\n              context,\n              ...(ref && { refProp: ref }),\n            };\n            const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n            const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n            instance = hydrateIn\n              ? ReactDOM.hydrate(wrappedEl, domNode)\n              : ReactDOM.render(wrappedEl, domNode);\n            if (typeof callback === 'function') {\n              callback();\n            }\n          } else {\n            instance.setChildProps(el.props, context, callback);\n          }\n        });\n      },\n      unmount() {\n        wrapAct(() => {\n          ReactDOM.unmountComponentAtNode(domNode);\n        });\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          toTree(instance._reactInternals),\n          options,\n        );\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        const isErrorBoundary = ({ instance: elInstance, type }) => {\n          if (type && type.getDerivedStateFromError) {\n            return true;\n          }\n          return elInstance && elInstance.componentDidCatch;\n        };\n\n        const {\n          instance: catchingInstance,\n          type: catchingType,\n        } = nodeHierarchy.find(isErrorBoundary) || {};\n\n        simulateError(\n          error,\n          catchingInstance,\n          rootNode,\n          nodeHierarchy,\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          catchingType,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        wrapAct(() => {\n          eventFn(adapter.nodeToHostNode(node), mock);\n        });\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => toTree(inst._reactInternals),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n      wrapInvoke: wrapAct,\n    };\n  }\n\n  createShallowRenderer(options = {}) {\n    const adapter = this;\n    const renderer = new ShallowRenderer();\n    const { suspenseFallback } = options;\n    if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\n      throw TypeError('`options.suspenseFallback` should be boolean or undefined');\n    }\n    let isDOM = false;\n    let cachedNode = null;\n\n    let lastComponent = null;\n    let wrappedComponent = null;\n    const sentinel = {};\n\n    // wrap memo components with a PureComponent, or a class component with sCU\n    const wrapPureComponent = (Component, compare) => {\n      if (lastComponent !== Component) {\n        if (isStateful(Component)) {\n          wrappedComponent = class extends Component {};\n          if (compare) {\n            wrappedComponent.prototype.shouldComponentUpdate = (nextProps) => (\n              !compare(this.props, nextProps)\n            );\n          } else {\n            wrappedComponent.prototype.isPureReactComponent = true;\n          }\n        } else {\n          let memoized = sentinel;\n          let prevProps;\n          wrappedComponent = function wrappedComponentFn(props, ...args) {\n            const shouldUpdate = memoized === sentinel || (compare\n              ? !compare(prevProps, props)\n              : !shallowEqual(prevProps, props)\n            );\n            if (shouldUpdate) {\n              memoized = Component({ ...Component.defaultProps, ...props }, ...args);\n              prevProps = props;\n            }\n            return memoized;\n          };\n        }\n        Object.assign(\n          wrappedComponent,\n          Component,\n          { displayName: adapter.displayNameOfNode({ type: Component }) },\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    // Wrap functional components on versions prior to 16.5,\n    // to avoid inadvertently pass a `this` instance to it.\n    const wrapFunctionalComponent = (Component) => {\n      if (has(Component, 'defaultProps')) {\n        if (lastComponent !== Component) {\n          wrappedComponent = Object.assign(\n            // eslint-disable-next-line new-cap\n            (props, ...args) => Component({ ...Component.defaultProps, ...props }, ...args),\n            Component,\n            { displayName: adapter.displayNameOfNode({ type: Component }) },\n          );\n          lastComponent = Component;\n        }\n        return wrappedComponent;\n      }\n\n      return Component;\n    };\n\n    const renderElement = (elConfig, ...rest) => {\n      const renderedEl = renderer.render(elConfig, ...rest);\n\n      const typeIsExisted = !!(renderedEl && renderedEl.type);\n      if (typeIsExisted) {\n        const clonedEl = checkIsSuspenseAndCloneElement(renderedEl, { suspenseFallback });\n\n        const elementIsChanged = clonedEl.type !== renderedEl.type;\n        if (elementIsChanged) {\n          return renderer.render({ ...elConfig, type: clonedEl.type }, ...rest);\n        }\n      }\n\n      return renderedEl;\n    };\n\n    return {\n      // eslint-disable-next-line consistent-return\n      render(el, unmaskedContext, {\n        providerValues = new Map(),\n      } = {}) {\n        cachedNode = el;\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else if (isContextProvider(el)) {\n          providerValues.set(el.type, el.props.value);\n          const MockProvider = Object.assign(\n            (props) => props.children,\n            el.type,\n          );\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockProvider }));\n        } else if (isContextConsumer(el)) {\n          const Provider = adapter.getProviderFromConsumer(el.type);\n          const value = providerValues.has(Provider)\n            ? providerValues.get(Provider)\n            : getProviderDefaultValue(Provider);\n          const MockConsumer = Object.assign(\n            (props) => props.children(value),\n            el.type,\n          );\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockConsumer }));\n        } else {\n          isDOM = false;\n          let renderedEl = el;\n          if (isLazy(renderedEl)) {\n            throw TypeError('`React.lazy` is not supported by shallow rendering.');\n          }\n\n          renderedEl = checkIsSuspenseAndCloneElement(renderedEl, { suspenseFallback });\n          const { type: Component } = renderedEl;\n\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\n\n          if (isMemo(el.type)) {\n            const { type: InnerComp, compare } = el.type;\n\n            return withSetStateAllowed(() => renderElement(\n              { ...el, type: wrapPureComponent(InnerComp, compare) },\n              context,\n            ));\n          }\n\n          const isComponentStateful = isStateful(Component);\n\n          if (!isComponentStateful && typeof Component === 'function') {\n            return withSetStateAllowed(() => renderElement(\n              { ...renderedEl, type: wrapFunctionalComponent(Component) },\n              context,\n            ));\n          }\n\n          if (isComponentStateful) {\n            if (\n              renderer._instance\n              && el.props === renderer._instance.props\n              && !shallowEqual(context, renderer._instance.context)\n            ) {\n              const { restore } = spyMethod(\n                renderer,\n                '_updateClassComponent',\n                (originalMethod) => function _updateClassComponent(...args) {\n                  const { props } = renderer._instance;\n                  const clonedProps = { ...props };\n                  renderer._instance.props = clonedProps;\n\n                  const result = originalMethod.apply(renderer, args);\n\n                  renderer._instance.props = props;\n                  restore();\n\n                  return result;\n                },\n              );\n            }\n\n            // fix react bug; see implementation of `getEmptyStateValue`\n            const emptyStateValue = getEmptyStateValue();\n            if (emptyStateValue) {\n              Object.defineProperty(Component.prototype, 'state', {\n                configurable: true,\n                enumerable: true,\n                get() {\n                  return null;\n                },\n                set(value) {\n                  if (value !== emptyStateValue) {\n                    Object.defineProperty(this, 'state', {\n                      configurable: true,\n                      enumerable: true,\n                      value,\n                      writable: true,\n                    });\n                  }\n                  return true;\n                },\n              });\n            }\n          }\n          return withSetStateAllowed(() => renderElement(renderedEl, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: nodeTypeFromType(cachedNode.type),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance,\n          rendered: Array.isArray(output)\n            ? flatten(output).map((el) => elementToTree(el))\n            : elementToTree(output),\n        };\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        simulateError(\n          error,\n          renderer._instance,\n          cachedNode,\n          nodeHierarchy.concat(cachedNode),\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          cachedNode.type,\n        );\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            // ReactDOM.unstable_batchedUpdates(() => {\n            handler(...args);\n            // });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\n        return checkPropTypes(\n          typeSpecs,\n          values,\n          location,\n          displayNameOfNode(cachedNode),\n          () => getComponentStack(hierarchy.concat([cachedNode])),\n        );\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');\n    }\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    const { type } = node;\n    return React.createElement(unmemoType(type), propsWithKeysAndRef(node));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matchesElementType(node, matchingType) {\n    if (!node) {\n      return node;\n    }\n    const { type } = node;\n    return unmemoType(type) === unmemoType(matchingType);\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node, supportsArray = false) {\n    const nodes = nodeToHostNode(node);\n    if (Array.isArray(nodes) && !supportsArray) {\n      return nodes[0];\n    }\n    return nodes;\n  }\n\n  displayNameOfNode(node) {\n    if (!node) return null;\n    const { type, $$typeof } = node;\n    const adapter = this;\n\n    const nodeType = type || $$typeof;\n\n    // newer node types may be undefined, so only test if the nodeType exists\n    if (nodeType) {\n      switch (nodeType) {\n        case ConcurrentMode || NaN: return 'ConcurrentMode';\n        case Fragment || NaN: return 'Fragment';\n        case StrictMode || NaN: return 'StrictMode';\n        case Profiler || NaN: return 'Profiler';\n        case Portal || NaN: return 'Portal';\n        case Suspense || NaN: return 'Suspense';\n        default:\n      }\n    }\n\n    const $$typeofType = type && type.$$typeof;\n\n    switch ($$typeofType) {\n      case ContextConsumer || NaN: return 'ContextConsumer';\n      case ContextProvider || NaN: return 'ContextProvider';\n      case Memo || NaN: {\n        const nodeName = displayNameOfNode(node);\n        return typeof nodeName === 'string' ? nodeName : `Memo(${adapter.displayNameOfNode(type)})`;\n      }\n      case ForwardRef || NaN: {\n        if (type.displayName) {\n          return type.displayName;\n        }\n        const name = adapter.displayNameOfNode({ type: type.render });\n        return name ? `ForwardRef(${name})` : 'ForwardRef';\n      }\n      case Lazy || NaN: {\n        return 'lazy';\n      }\n      default: return displayNameOfNode(node);\n    }\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return !!object && isValidElementType(object);\n  }\n\n  isFragment(fragment) {\n    return typeOfNode(fragment) === Fragment;\n  }\n\n  isCustomComponent(type) {\n    const fakeElement = makeFakeElement(type);\n    return !!type && (\n      typeof type === 'function'\n      || isForwardRef(fakeElement)\n      || isContextProvider(fakeElement)\n      || isContextConsumer(fakeElement)\n      || isSuspense(fakeElement)\n    );\n  }\n\n  isContextConsumer(type) {\n    return !!type && isContextConsumer(makeFakeElement(type));\n  }\n\n  isCustomComponentElement(inst) {\n    if (!inst || !this.isValidElement(inst)) {\n      return false;\n    }\n    return this.isCustomComponent(inst.type);\n  }\n\n  getProviderFromConsumer(Consumer) {\n    // React stores references to the Provider on a Consumer differently across versions.\n    if (Consumer) {\n      let Provider;\n      if (Consumer._context) { // check this first, to avoid a deprecation warning\n        ({ Provider } = Consumer._context);\n      } else if (Consumer.Provider) {\n        ({ Provider } = Consumer);\n      }\n      if (Provider) {\n        return Provider;\n      }\n    }\n    throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactSeventeenAdapter;\n"],"file":"ReactSeventeenAdapter.js"}