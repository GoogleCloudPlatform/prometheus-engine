{"version":3,"file":"ReactSeventeenAdapter.js","names":["FiberTags","nodeAndSiblingsArray","nodeWithSibling","array","node","push","sibling","flatten","arr","result","stack","i","length","n","pop","el","Array","isArray","nodeTypeFromType","type","Portal","utilNodeTypeFromType","isMemo","compareNodeTypeOf","Memo","isLazy","Lazy","unmemoType","checkIsSuspenseAndCloneElement","suspenseFallback","isSuspense","children","props","fallback","replaceLazyWithFallback","FakeSuspenseWrapper","React","createElement","elementToTree","isPortal","utilElementToTree","containerInfo","nodeType","key","ensureKeyOrUndefined","ref","instance","rendered","toTree","vnode","findCurrentFiberUsingSlowPath","tag","HostRoot","childrenToTree","child","HostPortal","stateNode","memoizedProps","ClassComponent","FunctionalComponent","MemoClass","elementType","MemoSFC","renderedNodes","map","HostComponent","HostText","Fragment","Mode","ContextProvider","ContextConsumer","Profiler","ForwardRef","pendingProps","Suspense","OffscreenComponent","Error","nodeToHostNode","_node","mapper","item","ReactDOM","findDOMNode","wrapAct","fn","returnVal","TestUtils","act","getProviderDefaultValue","Provider","_context","_defaultValue","_currentValue","makeFakeElement","$$typeof","Element","isStateful","Component","prototype","isReactComponent","__reactAutoBindPairs","ReactSeventeenAdapter","lifecycles","options","enableComponentDidUpdateOnSetState","legacyContextMode","componentDidUpdate","onSetState","getDerivedStateFromProps","hasShouldComponentUpdateBug","getSnapshotBeforeUpdate","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","getDerivedStateFromError","assertDomAvailable","has","TypeError","detectFiberTags","attachTo","hydrateIn","wrappingComponentProps","domNode","global","document","adapter","render","context","callback","wrapperProps","refProp","ReactWrapperComponent","createMountWrapper","wrappedEl","hydrate","setChildProps","unmount","unmountComponentAtNode","getNode","getNodeFromRootFinder","isCustomComponent","_reactInternals","simulateError","nodeHierarchy","rootNode","error","isErrorBoundary","elInstance","componentDidCatch","find","catchingInstance","catchingType","displayNameOfNode","bind","simulateEvent","event","mock","mappedEvent","mapNativeEventNames","eventFn","Simulate","batchedUpdates","getWrappingComponentRenderer","getWrappingComponentMountRenderer","inst","getMountWrapperInstance","wrapInvoke","renderer","ShallowRenderer","isDOM","cachedNode","lastComponent","wrappedComponent","sentinel","wrapPureComponent","compare","shouldComponentUpdate","nextProps","isPureReactComponent","memoized","prevProps","wrappedComponentFn","shouldUpdate","shallowEqual","args","defaultProps","Object","assign","displayName","wrapFunctionalComponent","renderElement","elConfig","rest","renderedEl","typeIsExisted","clonedEl","elementIsChanged","unmaskedContext","providerValues","Map","isContextProvider","set","value","MockProvider","withSetStateAllowed","isContextConsumer","getProviderFromConsumer","get","MockConsumer","getMaskedContext","contextTypes","InnerComp","isComponentStateful","_instance","spyMethod","originalMethod","_updateClassComponent","clonedProps","apply","restore","output","getRenderOutput","concat","handler","propFromEvent","checkPropTypes","typeSpecs","values","location","hierarchy","getComponentStack","childContextTypes","ContextWrapper","createRenderWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","wrap","propsWithKeysAndRef","matchingType","supportsArray","nodes","filter","Boolean","ConcurrentMode","NaN","StrictMode","$$typeofType","nodeName","name","isElement","object","isValidElementType","fragment","typeOfNode","fakeElement","isForwardRef","isValidElement","Consumer","RootFinder","wrapWithWrappingComponent","module","exports"],"sources":["../src/ReactSeventeenAdapter.js"],"sourcesContent":["/* eslint-disable no-use-before-define */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactDOMServer from 'react-dom/server';\nimport ShallowRenderer from 'react-test-renderer/shallow';\nimport TestUtils from 'react-dom/test-utils';\nimport checkPropTypes from 'prop-types/checkPropTypes';\nimport has from 'has';\nimport {\n  ConcurrentMode,\n  ContextConsumer,\n  ContextProvider,\n  Element,\n  ForwardRef,\n  Fragment,\n  isContextConsumer,\n  isContextProvider,\n  isElement,\n  isForwardRef,\n  isPortal,\n  isSuspense,\n  isValidElementType,\n  Lazy,\n  Memo,\n  Portal,\n  Profiler,\n  StrictMode,\n  Suspense,\n} from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport { typeOfNode } from 'enzyme/build/Utils';\nimport shallowEqual from 'enzyme-shallow-equal';\nimport {\n  displayNameOfNode,\n  elementToTree as utilElementToTree,\n  nodeTypeFromType as utilNodeTypeFromType,\n  mapNativeEventNames,\n  propFromEvent,\n  assertDomAvailable,\n  withSetStateAllowed,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  simulateError,\n  wrap,\n  getMaskedContext,\n  getComponentStack,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n  compareNodeTypeOf,\n  spyMethod,\n} from '@wojtekmaj/enzyme-adapter-utils';\nimport findCurrentFiberUsingSlowPath from './findCurrentFiberUsingSlowPath';\nimport detectFiberTags from './detectFiberTags';\n\n// Lazily populated if DOM is available.\nlet FiberTags = null;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  const array = [];\n  let node = nodeWithSibling;\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n  return array;\n}\n\nfunction flatten(arr) {\n  const result = [];\n  const stack = [{ i: 0, array: arr }];\n  while (stack.length) {\n    const n = stack.pop();\n    while (n.i < n.array.length) {\n      const el = n.array[n.i];\n      n.i += 1;\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({ i: 0, array: el });\n        break;\n      }\n      result.push(el);\n    }\n  }\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === Portal) {\n    return 'portal';\n  }\n\n  return utilNodeTypeFromType(type);\n}\n\nfunction isMemo(type) {\n  return compareNodeTypeOf(type, Memo);\n}\n\nfunction isLazy(type) {\n  return compareNodeTypeOf(type, Lazy);\n}\n\nfunction unmemoType(type) {\n  return isMemo(type) ? type.type : type;\n}\n\nfunction checkIsSuspenseAndCloneElement(el, { suspenseFallback }) {\n  if (!isSuspense(el)) {\n    return el;\n  }\n\n  let { children } = el.props;\n\n  if (suspenseFallback) {\n    const { fallback } = el.props;\n    children = replaceLazyWithFallback(children, fallback);\n  }\n\n  const FakeSuspenseWrapper = (props) =>\n    React.createElement(el.type, { ...el.props, ...props }, children);\n  return React.createElement(FakeSuspenseWrapper, null, children);\n}\n\nfunction elementToTree(el) {\n  if (!isPortal(el)) {\n    return utilElementToTree(el, elementToTree);\n  }\n\n  const { children, containerInfo } = el;\n  const props = { children, containerInfo };\n\n  return {\n    nodeType: 'portal',\n    type: Portal,\n    props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children),\n  };\n}\n\nfunction toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  }\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n  const node = findCurrentFiberUsingSlowPath(vnode);\n  switch (node.tag) {\n    case FiberTags.HostRoot:\n      return childrenToTree(node.child);\n    case FiberTags.HostPortal: {\n      const {\n        stateNode: { containerInfo },\n        memoizedProps: children,\n      } = node;\n      const props = { containerInfo, children };\n      return {\n        nodeType: 'portal',\n        type: Portal,\n        props,\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.FunctionalComponent:\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.MemoClass:\n      return {\n        nodeType: 'class',\n        type: node.elementType.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child.child),\n      };\n    case FiberTags.MemoSFC: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = childrenToTree(node.memoizedProps.children);\n      }\n      return {\n        nodeType: 'function',\n        type: node.elementType,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostComponent: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'host',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostText:\n      return node.memoizedProps;\n    case FiberTags.Fragment:\n    case FiberTags.Mode:\n    case FiberTags.ContextProvider:\n    case FiberTags.ContextConsumer:\n      return childrenToTree(node.child);\n    case FiberTags.Profiler:\n    case FiberTags.ForwardRef: {\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.pendingProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Suspense: {\n      return {\n        nodeType: 'function',\n        type: Suspense,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Lazy:\n      return childrenToTree(node.child);\n    case FiberTags.OffscreenComponent:\n      return childrenToTree(node.child);\n    default:\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n  const children = nodeAndSiblingsArray(node);\n  if (children.length === 0) {\n    return null;\n  }\n  if (children.length === 1) {\n    return toTree(children[0]);\n  }\n  return flatten(children.map(toTree));\n}\n\nfunction nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  let node = _node;\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  }\n  // if the SFC returned null effectively, there is no host node.\n  if (!node) {\n    return null;\n  }\n\n  const mapper = (item) => {\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\n    return null;\n  };\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n  return mapper(node);\n}\n\nfunction replaceLazyWithFallback(node, fallback) {\n  if (!node) {\n    return null;\n  }\n  if (Array.isArray(node)) {\n    return node.map((el) => replaceLazyWithFallback(el, fallback));\n  }\n  if (isLazy(node.type)) {\n    return fallback;\n  }\n  return {\n    ...node,\n    props: {\n      ...node.props,\n      children: replaceLazyWithFallback(node.props.children, fallback),\n    },\n  };\n}\n\nfunction wrapAct(fn) {\n  let returnVal;\n  TestUtils.act(() => {\n    returnVal = fn();\n  });\n  return returnVal;\n}\n\nfunction getProviderDefaultValue(Provider) {\n  // React stores references to the Provider's defaultValue differently across versions.\n  if ('_defaultValue' in Provider._context) {\n    return Provider._context._defaultValue;\n  }\n  if ('_currentValue' in Provider._context) {\n    return Provider._context._currentValue;\n  }\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\n}\n\nfunction makeFakeElement(type) {\n  return { $$typeof: Element, type };\n}\n\nfunction isStateful(Component) {\n  return (\n    Component.prototype &&\n    (Component.prototype.isReactComponent || Array.isArray(Component.__reactAutoBindPairs)) // fallback for createClass components\n  );\n}\n\nclass ReactSeventeenAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      enableComponentDidUpdateOnSetState: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          onSetState: true,\n        },\n        getDerivedStateFromProps: {\n          hasShouldComponentUpdateBug: false,\n        },\n        getSnapshotBeforeUpdate: true,\n        setState: {\n          skipsComponentDidUpdateOnNullish: true,\n        },\n        getChildContext: {\n          calledByRenderer: false,\n        },\n        getDerivedStateFromError: true,\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\n    }\n    if (FiberTags === null) {\n      // Requires DOM.\n      FiberTags = detectFiberTags();\n    }\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        return wrapAct(() => {\n          if (instance === null) {\n            const { type, props, ref } = el;\n            const wrapperProps = {\n              Component: type,\n              props,\n              wrappingComponentProps,\n              context,\n              ...(ref && { refProp: ref }),\n            };\n            const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n            const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n            instance = hydrateIn\n              ? ReactDOM.hydrate(wrappedEl, domNode)\n              : ReactDOM.render(wrappedEl, domNode);\n            if (typeof callback === 'function') {\n              callback();\n            }\n          } else {\n            instance.setChildProps(el.props, context, callback);\n          }\n        });\n      },\n      unmount() {\n        wrapAct(() => {\n          ReactDOM.unmountComponentAtNode(domNode);\n        });\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          toTree(instance._reactInternals),\n          options,\n        );\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        const isErrorBoundary = ({ instance: elInstance, type }) => {\n          if (type && type.getDerivedStateFromError) {\n            return true;\n          }\n          return elInstance && elInstance.componentDidCatch;\n        };\n\n        const { instance: catchingInstance, type: catchingType } =\n          nodeHierarchy.find(isErrorBoundary) || {};\n\n        simulateError(\n          error,\n          catchingInstance,\n          nodeHierarchy,\n          nodeTypeFromType,\n          adapter.displayNameOfNode.bind(adapter),\n          catchingType,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        wrapAct(() => {\n          eventFn(adapter.nodeToHostNode(node), mock);\n        });\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => toTree(inst._reactInternals),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n      wrapInvoke: wrapAct,\n    };\n  }\n\n  createShallowRenderer(options = {}) {\n    const adapter = this;\n    const renderer = new ShallowRenderer();\n    const { suspenseFallback } = options;\n    if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\n      throw TypeError('`options.suspenseFallback` should be boolean or undefined');\n    }\n    let isDOM = false;\n    let cachedNode = null;\n\n    let lastComponent = null;\n    let wrappedComponent = null;\n    const sentinel = {};\n\n    // wrap memo components with a PureComponent, or a class component with sCU\n    const wrapPureComponent = (Component, compare) => {\n      if (lastComponent !== Component) {\n        if (isStateful(Component)) {\n          wrappedComponent = class extends Component {};\n          if (compare) {\n            wrappedComponent.prototype.shouldComponentUpdate = (nextProps) =>\n              !compare(this.props, nextProps);\n          } else {\n            wrappedComponent.prototype.isPureReactComponent = true;\n          }\n        } else {\n          let memoized = sentinel;\n          let prevProps;\n          wrappedComponent = function wrappedComponentFn(props, ...args) {\n            const shouldUpdate =\n              memoized === sentinel ||\n              (compare ? !compare(prevProps, props) : !shallowEqual(prevProps, props));\n            if (shouldUpdate) {\n              memoized = Component({ ...Component.defaultProps, ...props }, ...args);\n              prevProps = props;\n            }\n            return memoized;\n          };\n        }\n        Object.assign(wrappedComponent, Component, {\n          displayName: adapter.displayNameOfNode({ type: Component }),\n        });\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    // Wrap functional components on versions prior to 16.5,\n    // to avoid inadvertently pass a `this` instance to it.\n    const wrapFunctionalComponent = (Component) => {\n      if (has(Component, 'defaultProps')) {\n        if (lastComponent !== Component) {\n          wrappedComponent = Object.assign(\n            (props, ...args) => Component({ ...Component.defaultProps, ...props }, ...args),\n            Component,\n            { displayName: adapter.displayNameOfNode({ type: Component }) },\n          );\n          lastComponent = Component;\n        }\n        return wrappedComponent;\n      }\n\n      return Component;\n    };\n\n    const renderElement = (elConfig, ...rest) => {\n      const renderedEl = renderer.render(elConfig, ...rest);\n\n      const typeIsExisted = !!(renderedEl && renderedEl.type);\n      if (typeIsExisted) {\n        const clonedEl = checkIsSuspenseAndCloneElement(renderedEl, { suspenseFallback });\n\n        const elementIsChanged = clonedEl.type !== renderedEl.type;\n        if (elementIsChanged) {\n          return renderer.render({ ...elConfig, type: clonedEl.type }, ...rest);\n        }\n      }\n\n      return renderedEl;\n    };\n\n    return {\n      render(el, unmaskedContext, { providerValues = new Map() } = {}) {\n        cachedNode = el;\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else if (isContextProvider(el)) {\n          providerValues.set(el.type, el.props.value);\n          const MockProvider = Object.assign((props) => props.children, el.type);\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockProvider }));\n        } else if (isContextConsumer(el)) {\n          const Provider = adapter.getProviderFromConsumer(el.type);\n          const value = providerValues.has(Provider)\n            ? providerValues.get(Provider)\n            : getProviderDefaultValue(Provider);\n          const MockConsumer = Object.assign((props) => props.children(value), el.type);\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockConsumer }));\n        } else {\n          isDOM = false;\n          let renderedEl = el;\n          if (isLazy(renderedEl)) {\n            throw TypeError('`React.lazy` is not supported by shallow rendering.');\n          }\n\n          renderedEl = checkIsSuspenseAndCloneElement(renderedEl, { suspenseFallback });\n          const { type: Component } = renderedEl;\n\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\n\n          if (isMemo(el.type)) {\n            const { type: InnerComp, compare } = el.type;\n\n            return withSetStateAllowed(() =>\n              renderElement({ ...el, type: wrapPureComponent(InnerComp, compare) }, context),\n            );\n          }\n\n          const isComponentStateful = isStateful(Component);\n\n          if (!isComponentStateful && typeof Component === 'function') {\n            return withSetStateAllowed(() =>\n              renderElement({ ...renderedEl, type: wrapFunctionalComponent(Component) }, context),\n            );\n          }\n\n          if (\n            isComponentStateful &&\n            renderer._instance &&\n            el.props === renderer._instance.props &&\n            !shallowEqual(context, renderer._instance.context)\n          ) {\n            const { restore } = spyMethod(\n              renderer,\n              '_updateClassComponent',\n              (originalMethod) =>\n                function _updateClassComponent(...args) {\n                  const { props } = renderer._instance;\n                  const clonedProps = { ...props };\n                  renderer._instance.props = clonedProps;\n\n                  const result = originalMethod.apply(renderer, args);\n\n                  renderer._instance.props = props;\n                  restore();\n\n                  return result;\n                },\n            );\n          }\n          return withSetStateAllowed(() => renderElement(renderedEl, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: nodeTypeFromType(cachedNode.type),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance,\n          rendered: Array.isArray(output)\n            ? flatten(output).map((el) => elementToTree(el))\n            : elementToTree(output),\n        };\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        simulateError(\n          error,\n          renderer._instance,\n          nodeHierarchy.concat(cachedNode),\n          nodeTypeFromType,\n          adapter.displayNameOfNode.bind(adapter),\n          cachedNode.type,\n        );\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            // ReactDOM.unstable_batchedUpdates(() => {\n            handler(...args);\n            // });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\n        return checkPropTypes(typeSpecs, values, location, displayNameOfNode(cachedNode), () =>\n          getComponentStack(hierarchy.concat([cachedNode])),\n        );\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError(\n        '`suspenseFallback` should not be specified in options of string renderer',\n      );\n    }\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT:\n        return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW:\n        return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING:\n        return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    const { type } = node;\n    return React.createElement(unmemoType(type), propsWithKeysAndRef(node));\n  }\n\n  matchesElementType(node, matchingType) {\n    if (!node) {\n      return node;\n    }\n    const { type } = node;\n    return unmemoType(type) === unmemoType(matchingType);\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node, supportsArray = false) {\n    const nodes = nodeToHostNode(node);\n    if (Array.isArray(nodes) && !supportsArray) {\n      // get the first non-null node\n      return nodes.filter(Boolean)[0];\n    }\n    return nodes;\n  }\n\n  displayNameOfNode(node) {\n    if (!node) return null;\n    const { type, $$typeof } = node;\n    const adapter = this;\n\n    const nodeType = type || $$typeof;\n\n    // newer node types may be undefined, so only test if the nodeType exists\n    if (nodeType) {\n      switch (nodeType) {\n        case ConcurrentMode || NaN:\n          return 'ConcurrentMode';\n        case Fragment || NaN:\n          return 'Fragment';\n        case StrictMode || NaN:\n          return 'StrictMode';\n        case Profiler || NaN:\n          return 'Profiler';\n        case Portal || NaN:\n          return 'Portal';\n        case Suspense || NaN:\n          return 'Suspense';\n        default:\n      }\n    }\n\n    const $$typeofType = type && type.$$typeof;\n\n    switch ($$typeofType) {\n      case ContextConsumer || NaN:\n        return 'ContextConsumer';\n      case ContextProvider || NaN:\n        return 'ContextProvider';\n      case Memo || NaN: {\n        const nodeName = displayNameOfNode(node);\n        return typeof nodeName === 'string' ? nodeName : `Memo(${adapter.displayNameOfNode(type)})`;\n      }\n      case ForwardRef || NaN: {\n        if (type.displayName) {\n          return type.displayName;\n        }\n        const name = adapter.displayNameOfNode({ type: type.render });\n        return name ? `ForwardRef(${name})` : 'ForwardRef';\n      }\n      case Lazy || NaN: {\n        return 'lazy';\n      }\n      default:\n        return displayNameOfNode(node);\n    }\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return !!object && isValidElementType(object);\n  }\n\n  isFragment(fragment) {\n    return typeOfNode(fragment) === Fragment;\n  }\n\n  isCustomComponent(type) {\n    const fakeElement = makeFakeElement(type);\n    return (\n      !!type &&\n      (typeof type === 'function' ||\n        isForwardRef(fakeElement) ||\n        isContextProvider(fakeElement) ||\n        isContextConsumer(fakeElement) ||\n        isSuspense(fakeElement))\n    );\n  }\n\n  isContextConsumer(type) {\n    return !!type && isContextConsumer(makeFakeElement(type));\n  }\n\n  isCustomComponentElement(inst) {\n    if (!inst || !this.isValidElement(inst)) {\n      return false;\n    }\n    return this.isCustomComponent(inst.type);\n  }\n\n  getProviderFromConsumer(Consumer) {\n    // React stores references to the Provider on a Consumer differently across versions.\n    if (Consumer) {\n      let Provider;\n      if (Consumer._context) {\n        // check this first, to avoid a deprecation warning\n        ({ Provider } = Consumer._context);\n      } else if (Consumer.Provider) {\n        ({ Provider } = Consumer);\n      }\n      if (Provider) {\n        return Provider;\n      }\n    }\n    throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactSeventeenAdapter;\n"],"mappings":"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"}